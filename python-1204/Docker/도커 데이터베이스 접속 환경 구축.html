<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Docker & Data Analysis Interactive Lab</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>

    <!-- Highlight.js (Code Coloring) -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/atom-one-dark.min.css"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>

    <!-- Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=JetBrains+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Noto Sans KR", sans-serif;
        background-color: #fafaf9;
        color: #1c1917;
      }
      .font-mono {
        font-family: "JetBrains Mono", monospace;
      }

      /* Custom Scrollbar for code blocks */
      .code-scroll::-webkit-scrollbar {
        height: 8px;
        width: 8px;
      }
      .code-scroll::-webkit-scrollbar-track {
        background: #282c34;
      }
      .code-scroll::-webkit-scrollbar-thumb {
        background: #57534e;
        border-radius: 4px;
      }

      /* Chart Container Utilities */
      .chart-wrapper {
        position: relative;
        width: 100%;
        max-width: 600px;
        height: 300px;
        margin: 0 auto;
      }

      .active-tab {
        border-bottom: 2px solid #ea580c;
        color: #ea580c;
        font-weight: 700;
      }
      .inactive-tab {
        color: #78716c;
      }
      .inactive-tab:hover {
        color: #44403c;
      }

      /* Env Switcher Tabs */
      .env-tab-active {
        background-color: #fff7ed;
        color: #c2410c;
        border: 1px solid #fdba74;
        border-bottom: none;
      }
      .env-tab-inactive {
        background-color: #f5f5f4;
        color: #78716c;
        border: 1px solid #e7e5e4;
      }

      /* Local Toggle Button State */
      .local-btn-active {
        background-color: #ffffff;
        color: #1c1917;
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      }
      .local-btn-inactive {
        color: #78716c;
        background-color: transparent;
      }

      /* Highlight.js Override */
      pre code.hljs {
        padding: 0;
        background: transparent;
        font-family: "JetBrains Mono", monospace;
        line-height: 1.6;
      }

      .fade-in {
        animation: fadeIn 0.3s ease-in-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
    </style>
    <!-- Visualization & Content Choices: 
         - REMOVED all PostgreSQL references as requested.
         - Simplified Architecture diagram (2 DBs instead of 3).
         - Removed psycopg2 from install commands.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
  </head>
  <body class="antialiased selection:bg-orange-200 selection:text-orange-900">
    <!-- Navigation / Header -->
    <nav class="bg-white border-b border-stone-200 sticky top-0 z-50 shadow-sm">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between h-16">
          <div class="flex items-center">
            <div class="flex-shrink-0 flex items-center gap-2">
              <span class="text-2xl">ğŸ³</span>
              <h1 class="font-bold text-xl tracking-tight text-stone-800">
                Data Lab: Docker & Python
              </h1>
            </div>
          </div>
          <div class="hidden sm:flex sm:items-center sm:space-x-8">
            <button
              onclick="scrollToSection('architecture')"
              class="text-stone-600 hover:text-orange-600 px-3 py-2 text-sm font-medium transition-colors"
            >
              Architecture
            </button>
            <button
              onclick="scrollToSection('setup')"
              class="text-stone-600 hover:text-orange-600 px-3 py-2 text-sm font-medium transition-colors"
            >
              Setup
            </button>
            <button
              onclick="scrollToSection('codelab')"
              class="text-stone-600 hover:text-orange-600 px-3 py-2 text-sm font-medium transition-colors"
            >
              Code Lab
            </button>
            <button
              onclick="scrollToSection('ubuntu-setup')"
              class="text-stone-600 hover:text-orange-600 px-3 py-2 text-sm font-medium transition-colors"
            >
              Ubuntu Dev
            </button>
            <button
              onclick="scrollToSection('troubleshooting')"
              class="text-stone-600 hover:text-orange-600 px-3 py-2 text-sm font-medium transition-colors"
            >
              Help
            </button>
          </div>
        </div>
      </div>
    </nav>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 space-y-16">
      <!-- Intro Section -->
      <section class="text-center max-w-3xl mx-auto space-y-4">
        <h2 class="text-4xl font-extrabold text-stone-900 sm:text-5xl">
          ë‚˜ë§Œì˜ ë°ì´í„° ë¶„ì„ í™˜ê²½ êµ¬ì¶•
        </h2>
        <p class="text-lg text-stone-600">
          ë³µì¡í•œ ì„¤ì¹˜ ì—†ì´ <strong>Docker</strong>ë¡œ MySQL, MongoDBë¥¼
          ì‹¤í–‰í•˜ê³ ,<br />
          <strong>Python</strong>ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ëŠ” ì‹¤ë¬´ í…Œí¬ë‹‰ì„
          ë§ˆìŠ¤í„°í•˜ì„¸ìš”.
        </p>
        <div class="flex justify-center gap-4 pt-4">
          <span
            class="px-3 py-1 bg-stone-100 text-stone-600 rounded-full text-xs font-mono"
            >Docker Desktop Required</span
          >
          <span
            class="px-3 py-1 bg-stone-100 text-stone-600 rounded-full text-xs font-mono"
            >Python 3.8+</span
          >
        </div>
      </section>

      <!-- 1. Architecture Visualization -->
      <section id="architecture" class="scroll-mt-24">
        <div class="border-l-4 border-orange-500 pl-4 mb-8">
          <h3 class="text-2xl font-bold text-stone-900">
            1. ë™ì‘ ì›ë¦¬ (Architecture)
          </h3>
          <p class="text-stone-600 mt-2">
            ì‹¤ìŠµ ì „, ì½”ë“œê°€ ì–´ë””ì„œ ì‹¤í–‰ë˜ê³  ë°ì´í„°ë² ì´ìŠ¤ê°€ ì–´ë””ì— ìˆëŠ”ì§€
            ì´í•´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
            <strong>Port Forwarding</strong>ì„ í†µí•´ ë‚´ ì»´í“¨í„°(Host)ì˜ ìš”ì²­ì´
            ê²©ë¦¬ëœ ë„ì»¤ ì»¨í…Œì´ë„ˆë¡œ ì „ë‹¬ë©ë‹ˆë‹¤.
          </p>
        </div>

        <!-- Interactive Diagram Container -->
        <div
          class="bg-stone-100 rounded-2xl p-6 lg:p-10 shadow-inner relative overflow-hidden"
        >
          <div class="grid md:grid-cols-2 gap-8 relative z-10">
            <!-- Host Environment -->
            <div
              class="bg-white rounded-xl shadow-lg p-6 border-2 border-stone-200 relative group transition-all hover:border-blue-400"
            >
              <div
                class="absolute top-0 left-0 bg-stone-200 text-stone-600 text-xs font-bold px-3 py-1 rounded-br-lg"
              >
                HOST PC (Windows/Mac)
              </div>
              <div class="mt-6 flex flex-col items-center space-y-4">
                <div
                  class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center text-3xl"
                >
                  ğŸ’»
                </div>
                <div class="text-center">
                  <h4 class="font-bold text-lg">Python Code / GUI Tool</h4>
                  <p class="text-sm text-stone-500 font-mono mt-1">
                    host='localhost'
                  </p>
                </div>
                <!-- Ports (Only MySQL and Mongo) -->
                <div class="grid grid-cols-2 gap-2 w-full mt-4">
                  <div
                    class="bg-stone-50 border border-stone-300 rounded p-2 text-center text-xs font-mono cursor-pointer hover:bg-blue-50 transition-colors"
                    onmouseover="highlightConnection('mysql')"
                    onmouseout="resetConnection()"
                  >
                    Port: 3306
                    <div class="text-[10px] text-stone-400">MySQL</div>
                  </div>
                  <div
                    class="bg-stone-50 border border-stone-300 rounded p-2 text-center text-xs font-mono cursor-pointer hover:bg-blue-50 transition-colors"
                    onmouseover="highlightConnection('mongo')"
                    onmouseout="resetConnection()"
                  >
                    Port: 27017
                    <div class="text-[10px] text-stone-400">Mongo</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Connection Animation (Visual Bridge) -->
            <div
              class="hidden md:flex flex-col justify-center items-center text-stone-400 absolute inset-0 pointer-events-none"
            >
              <div
                id="conn-line"
                class="w-16 h-1 bg-stone-300 rounded transition-all duration-300"
              ></div>
              <span id="conn-text" class="text-xs font-mono bg-white px-2 mt-1"
                >Port Mapping (-p)</span
              >
            </div>

            <!-- Container Environment -->
            <div
              class="bg-stone-800 rounded-xl shadow-lg p-6 border-2 border-stone-700 relative text-white group transition-all hover:border-orange-500"
            >
              <div
                class="absolute top-0 right-0 bg-stone-600 text-white text-xs font-bold px-3 py-1 rounded-bl-lg"
              >
                DOCKER CONTAINER
              </div>
              <div class="mt-6 flex flex-col items-center space-y-4">
                <div
                  class="w-16 h-16 bg-stone-700 rounded-full flex items-center justify-center text-3xl"
                >
                  ğŸ“¦
                </div>
                <div class="text-center">
                  <h4 class="font-bold text-lg">Virtual Environment</h4>
                  <p class="text-sm text-stone-400 font-mono mt-1">
                    Internal IP
                  </p>
                </div>
                <!-- Containers (Only MySQL and Mongo) -->
                <div class="grid grid-cols-2 gap-2 w-full mt-4">
                  <div
                    id="target-mysql"
                    class="bg-stone-700 border border-stone-600 rounded p-2 text-center text-xs font-mono opacity-60 transition-all"
                  >
                    :3306
                    <div class="text-[10px] text-orange-300">MySQL</div>
                  </div>
                  <div
                    id="target-mongo"
                    class="bg-stone-700 border border-stone-600 rounded p-2 text-center text-xs font-mono opacity-60 transition-all"
                  >
                    :27017
                    <div class="text-[10px] text-green-300">Mongo</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 2. Command Generator (Setup) -->
      <section id="setup" class="scroll-mt-24">
        <div class="border-l-4 border-orange-500 pl-4 mb-8">
          <h3 class="text-2xl font-bold text-stone-900">
            2. ì„œë²„ ì‹¤í–‰ (Command Builder)
          </h3>
          <p class="text-stone-600 mt-2">
            ì•„ë˜ ì„¤ì •ê°’ì€ <strong>Code Lab</strong>ì˜ ì˜ˆì œ ì½”ë“œì—ë„ ìë™ìœ¼ë¡œ
            ë°˜ì˜ë©ë‹ˆë‹¤. ë¹„ë°€ë²ˆí˜¸ë‚˜ í¬íŠ¸ë¥¼ ë³€ê²½í–ˆë‹¤ë©´ ì½”ë“œë¥¼ ë‹¤ì‹œ í™•ì¸í•˜ì„¸ìš”.
          </p>
        </div>

        <div
          class="bg-white rounded-2xl shadow-sm border border-stone-200 p-6 lg:p-8"
        >
          <div class="grid lg:grid-cols-3 gap-8">
            <!-- Controls -->
            <div class="space-y-6">
              <div>
                <label class="block text-sm font-medium text-stone-700 mb-1"
                  >Database Type</label
                >
                <select
                  id="dbSelector"
                  onchange="onDbChange()"
                  class="w-full bg-stone-50 border border-stone-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-orange-500"
                >
                  <option value="mysql">MySQL (ê´€ê³„í˜•)</option>
                  <option value="mongo">MongoDB (NoSQL)</option>
                </select>
              </div>
              <div>
                <label class="block text-sm font-medium text-stone-700 mb-1"
                  >Password</label
                >
                <input
                  type="text"
                  id="passwordInput"
                  value="pass"
                  oninput="updateCommand()"
                  class="w-full bg-stone-50 border border-stone-300 rounded-lg px-3 py-2 text-sm font-mono focus:ring-2 focus:ring-orange-500 focus:border-orange-500"
                />
              </div>
              <div>
                <label class="block text-sm font-medium text-stone-700 mb-1"
                  >Host Port (ë‚´ ì»´í“¨í„° í¬íŠ¸)</label
                >
                <input
                  type="number"
                  id="portInput"
                  value="3307"
                  oninput="updateCommand()"
                  class="w-full bg-stone-50 border border-stone-300 rounded-lg px-3 py-2 text-sm font-mono focus:ring-2 focus:ring-orange-500 focus:border-orange-500"
                />
                <p class="text-xs text-stone-500 mt-1">
                  í¬íŠ¸ ì¶©ëŒ ì‹œ ë³€ê²½í•˜ì„¸ìš” (ì˜ˆ: 3308)
                </p>
              </div>
              <div class="flex items-center space-x-2">
                <input
                  type="checkbox"
                  id="volumeCheck"
                  onchange="updateCommand()"
                  class="rounded text-orange-600 focus:ring-orange-500"
                />
                <label for="volumeCheck" class="text-sm text-stone-700"
                  >ë°ì´í„° ì˜êµ¬ ë³´ì¡´ (Volume ì‚¬ìš©)</label
                >
              </div>
            </div>

            <!-- Output -->
            <div
              class="lg:col-span-2 bg-stone-900 rounded-xl p-6 flex flex-col justify-between relative group"
            >
              <div
                class="absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity"
              >
                <button
                  onclick="copyCommand()"
                  class="bg-stone-700 hover:bg-stone-600 text-white text-xs px-3 py-1 rounded transition-colors"
                >
                  Copy
                </button>
              </div>
              <div>
                <h5
                  class="text-stone-400 text-xs uppercase font-bold tracking-wider mb-2"
                >
                  Generated Docker Command
                </h5>
                <code
                  id="commandOutput"
                  class="text-green-400 font-mono text-sm break-all"
                  >docker run --name mysql-lecture -e MYSQL_ROOT_PASSWORD=pass
                  -d -p 3307:3306 mysql:latest</code
                >
              </div>
              <div class="mt-6 pt-4 border-t border-stone-700">
                <p id="commandDesc" class="text-stone-400 text-sm">
                  <span class="text-orange-400 font-bold">MySQL</span>
                  ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ë¹„ë°€ë²ˆí˜¸ëŠ” 'pass'ë¡œ ì„¤ì •ë˜ë©°, ë‚´
                  ì»´í“¨í„°ì˜ 3307 í¬íŠ¸ë¡œ ì ‘ì† ê°€ëŠ¥í•©ë‹ˆë‹¤.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Library Install (Local) -->
        <div
          class="mt-6 bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden"
        >
          <div
            class="bg-stone-50 border-b border-stone-200 px-4 py-3 flex justify-between items-center"
          >
            <div class="flex items-center gap-2">
              <span class="text-xl">ğŸ“¦</span>
              <div>
                <h4 class="font-bold text-stone-800 text-sm">
                  ë¡œì»¬ PC ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ (Option)
                </h4>
                <p class="text-xs text-stone-500">
                  Ubuntuê°€ ì•„ë‹Œ ìœˆë„ìš°(Host)ì—ì„œ ë°”ë¡œ ì‹¤í–‰í•  ê²½ìš°
                </p>
              </div>
            </div>
            <!-- Toggle Buttons -->
            <div class="flex bg-stone-200 rounded-lg p-1">
              <button
                onclick="switchLocalEnv('pip')"
                id="local-btn-pip"
                class="local-btn-active px-3 py-1 text-xs font-bold rounded-md transition-all"
              >
                pip
              </button>
              <button
                onclick="switchLocalEnv('conda')"
                id="local-btn-conda"
                class="local-btn-inactive px-3 py-1 text-xs font-bold rounded-md hover:text-stone-800 transition-all"
              >
                Conda
              </button>
            </div>
          </div>
          <div class="p-4 bg-stone-50">
            <div class="flex items-center gap-2 w-full">
              <code
                id="localCmd"
                class="bg-white px-4 py-2 rounded border border-stone-300 text-sm font-mono text-stone-700 flex-grow overflow-x-auto whitespace-nowrap"
                >pip install pymysql cryptography sqlalchemy pandas
                pymongo</code
              >
              <button
                onclick="copyToClipboard(document.getElementById('localCmd').innerText)"
                class="bg-stone-200 hover:bg-stone-300 text-stone-700 text-xs px-3 py-2 rounded font-medium transition-colors"
              >
                Copy
              </button>
            </div>
            <p id="localNote" class="text-xs text-stone-500 mt-2">
              * ì¼ë°˜ Python ì‚¬ìš©ìëŠ” CMD/PowerShellì—ì„œ ì‹¤í–‰í•˜ì„¸ìš”.
              (cryptography íŒ¨í‚¤ì§€ í¬í•¨ë¨)
            </p>
          </div>
        </div>
      </section>

      <!-- 3. Code Lab (Interactive) -->
      <section id="codelab" class="scroll-mt-24">
        <div class="border-l-4 border-orange-500 pl-4 mb-8">
          <h3 class="text-2xl font-bold text-stone-900">
            3. ì½”ë“œ ì‹¤ìŠµ (Code Lab)
          </h3>
          <p class="text-stone-600 mt-2">
            ì„¤ì •ê°’ì´ ë³€ê²½ë˜ë©´ ì½”ë“œë„ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.
            <strong>Host: 127.0.0.1</strong>ì„ ì‚¬ìš©í•˜ì—¬ ì—°ê²° ì˜¤ë¥˜ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.
          </p>
        </div>

        <div
          class="bg-white rounded-2xl shadow-xl overflow-hidden border border-stone-200"
        >
          <!-- Tabs -->
          <div
            class="flex border-b border-stone-200 bg-stone-50 overflow-x-auto"
          >
            <button
              onclick="switchTab('mysql')"
              id="tab-mysql"
              class="active-tab px-6 py-4 text-sm font-medium transition-colors whitespace-nowrap"
            >
              MySQL (PyMySQL)
            </button>
            <button
              onclick="switchTab('mongo')"
              id="tab-mongo"
              class="inactive-tab px-6 py-4 text-sm font-medium transition-colors whitespace-nowrap"
            >
              MongoDB (PyMongo)
            </button>
            <button
              onclick="switchTab('pandas')"
              id="tab-pandas"
              class="inactive-tab px-6 py-4 text-sm font-medium transition-colors whitespace-nowrap"
            >
              Pandas Analysis
            </button>
          </div>

          <!-- Code Content Area -->
          <div class="grid lg:grid-cols-2">
            <!-- Code View -->
            <div
              class="bg-[#282c34] p-6 code-scroll overflow-y-auto h-[500px] text-sm relative group"
            >
              <button
                onclick="copyToClipboard(document.getElementById('codeDisplay').innerText)"
                class="absolute top-4 right-4 bg-white/10 hover:bg-white/20 text-white text-xs px-3 py-1 rounded transition-colors opacity-0 group-hover:opacity-100 z-10"
              >
                Copy Code
              </button>
              <!-- 'language-python' class is key for Highlight.js -->
              <pre><code id="codeDisplay" class="language-python h-full"></code></pre>
            </div>

            <!-- Result/Simulation View -->
            <div
              class="p-6 bg-stone-50 border-l border-stone-200 flex flex-col h-[500px]"
            >
              <div class="flex justify-between items-center mb-4">
                <h4 class="font-bold text-stone-800">ì‹¤í–‰ ê²°ê³¼ (Simulation)</h4>
                <button
                  id="runBtn"
                  onclick="runSimulation()"
                  class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-transform active:scale-95"
                >
                  <span>â–¶ Run Code</span>
                </button>
              </div>

              <!-- Console Output -->
              <div
                id="consoleOutput"
                class="bg-black text-green-400 p-4 rounded-lg font-mono text-xs mb-4 flex-grow overflow-y-auto code-scroll hidden"
              >
                <!-- Logs will appear here -->
              </div>

              <!-- Chart Area (Only for Pandas) -->
              <div
                id="chartArea"
                class="hidden flex-grow flex items-center justify-center bg-white rounded-lg border border-stone-200 p-4"
              >
                <div class="chart-wrapper">
                  <canvas id="analysisChart"></canvas>
                </div>
              </div>

              <!-- Info Box -->
              <div
                id="infoBox"
                class="mt-auto bg-blue-50 text-blue-800 p-4 rounded-lg text-sm"
              >
                ì½”ë“œë¥¼ í™•ì¸í•˜ê³  <strong>Run Code</strong> ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì„¸ìš”.
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 4. Ubuntu Remote Dev Setup (NEW) -->
      <section id="ubuntu-setup" class="scroll-mt-24">
        <div class="border-l-4 border-orange-500 pl-4 mb-8">
          <h3 class="text-2xl font-bold text-stone-900">
            4. Ubuntu ì»¨í…Œì´ë„ˆ ê°œë°œ í™˜ê²½ êµ¬ì¶• (Step-by-Step)
          </h3>
          <p class="text-stone-600 mt-2">
            ìœˆë„ìš°ì—ì„œ Ubuntu ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ê³ , VS Codeë¥¼ í†µí•´ ë‚´ë¶€ë¡œ
            ì ‘ì†í•˜ì—¬ DB ì—°ê²°ì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ì „ì²´ ê³¼ì •ì…ë‹ˆë‹¤.
          </p>
        </div>

        <div class="space-y-8">
          <!-- Step 1: Create Ubuntu Container -->
          <div
            class="bg-white rounded-2xl shadow-sm border border-stone-200 overflow-hidden"
          >
            <div
              class="bg-stone-50 border-b border-stone-200 px-6 py-4 flex justify-between items-center"
            >
              <h4 class="font-bold text-stone-800 flex items-center gap-2">
                <span
                  class="bg-orange-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs"
                  >Step 1</span
                >
                my-ubuntu ì»¨í…Œì´ë„ˆ ìƒì„± (Docker CLI)
              </h4>
              <span class="text-xs font-mono text-stone-500"
                >Windows Terminal</span
              >
            </div>
            <div class="p-6 space-y-4">
              <p class="text-sm text-stone-600">
                ì•„ë˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì—¬ <strong>Ubuntu</strong> í™˜ê²½ì„ ë§Œë“­ë‹ˆë‹¤.
                (`-v` ì˜µì…˜ì€ í˜„ì¬ ìœˆë„ìš° í´ë”ë¥¼ ì»¨í…Œì´ë„ˆì˜ `/workspace`ì—
                ì—°ê²°í•©ë‹ˆë‹¤.)
              </p>

              <div
                class="bg-stone-900 rounded-lg p-4 text-xs md:text-sm text-stone-300 overflow-x-auto relative group"
              >
                <button
                  onclick="copyToClipboard(this.nextElementSibling.innerText)"
                  class="absolute top-4 right-4 bg-white/10 hover:bg-white/20 text-white text-xs px-3 py-1 rounded transition-colors opacity-0 group-hover:opacity-100"
                >
                  Copy
                </button>
                <pre><code class="language-bash whitespace-pre-wrap font-mono">docker run -it -d --name my-ubuntu -v ${PWD}:/workspace ubuntu:latest</code></pre>
              </div>
              <p class="text-xs text-stone-500 mb-4">
                * PowerShell ê¸°ì¤€ì…ë‹ˆë‹¤. CMDë¼ë©´ <code>%cd%</code>ë¥¼ ëŒ€ì‹ 
                ì‚¬ìš©í•˜ì„¸ìš”.
              </p>
            </div>
          </div>

          <!-- Step 2: Terminal Access -->
          <div
            class="bg-white rounded-2xl shadow-sm border border-stone-200 overflow-hidden"
          >
            <div
              class="bg-stone-50 border-b border-stone-200 px-6 py-4 flex justify-between items-center"
            >
              <h4 class="font-bold text-stone-800 flex items-center gap-2">
                <span
                  class="bg-orange-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs"
                  >Step 2</span
                >
                í„°ë¯¸ë„ë¡œ ì§ì ‘ ì ‘ì† (Optional)
              </h4>
              <span class="text-xs font-mono text-stone-500"
                >Windows Terminal</span
              >
            </div>
            <div class="p-6 space-y-4">
              <p class="text-sm text-stone-600">
                VS Code ì—†ì´ ì‰˜(/bin/bash)ë¡œ ë°”ë¡œ ì ‘ì†í•˜ë ¤ë©´ ì•„ë˜ ëª…ë ¹ì–´ë¥¼
                ì‚¬ìš©í•©ë‹ˆë‹¤.
              </p>
              <div
                class="bg-stone-800 rounded-lg p-3 text-xs md:text-sm text-stone-300 overflow-x-auto relative group"
              >
                <button
                  onclick="copyToClipboard(this.nextElementSibling.innerText)"
                  class="absolute top-2 right-2 bg-white/10 hover:bg-white/20 text-white text-xs px-2 py-1 rounded transition-colors opacity-0 group-hover:opacity-100"
                >
                  Copy
                </button>
                <pre><code class="language-bash whitespace-pre-wrap font-mono">docker exec -it my-ubuntu /bin/bash</code></pre>
              </div>
            </div>
          </div>

          <!-- Step 3: VS Code Connect -->
          <div
            class="bg-white rounded-2xl shadow-sm border border-stone-200 overflow-hidden"
          >
            <div class="bg-stone-50 border-b border-stone-200 px-6 py-4">
              <h4 class="font-bold text-stone-800 flex items-center gap-2">
                <span
                  class="bg-orange-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs"
                  >Step 3</span
                >
                VS Codeë¡œ ì»¨í…Œì´ë„ˆ ì ‘ì† (Attach)
              </h4>
            </div>
            <div class="p-6 grid md:grid-cols-2 gap-6">
              <div class="space-y-4">
                <div class="flex gap-3">
                  <div
                    class="bg-blue-50 text-blue-800 px-2 py-1 rounded text-xs font-bold h-fit"
                  >
                    A
                  </div>
                  <div class="text-sm text-stone-600">
                    <strong>Dev Containers í™•ì¥ ì„¤ì¹˜</strong><br />
                    VS Code ë§ˆì¼“í”Œë ˆì´ìŠ¤ì—ì„œ
                    <code class="bg-stone-100 px-1 rounded">Dev Containers</code
                    >ë¥¼ ê²€ìƒ‰í•˜ì—¬ ì„¤ì¹˜í•©ë‹ˆë‹¤.
                  </div>
                </div>
                <div class="flex gap-3">
                  <div
                    class="bg-blue-50 text-blue-800 px-2 py-1 rounded text-xs font-bold h-fit"
                  >
                    B
                  </div>
                  <div class="text-sm text-stone-600">
                    <strong>ì»¨í…Œì´ë„ˆ ì ‘ì†</strong><br />
                    <code class="bg-stone-100 px-1">F1</code> í‚¤ â†’
                    <code class="text-stone-800"
                      >Dev Containers: Attach to Running Container...</code
                    >
                    ì„ íƒ â†’ <strong>my-ubuntu</strong> í´ë¦­.
                  </div>
                </div>
                <div class="flex gap-3">
                  <div
                    class="bg-blue-50 text-blue-800 px-2 py-1 rounded text-xs font-bold h-fit"
                  >
                    C
                  </div>
                  <div class="text-sm text-stone-600">
                    <strong>í™•ì¥ í”„ë¡œê·¸ë¨ ì„¤ì¹˜ (í•„ìˆ˜)</strong><br />
                    ì ‘ì† í›„, ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ë„
                    <span class="font-bold text-orange-600">Python</span>ê³¼
                    <span class="font-bold text-orange-600">Jupyter</span>
                    í™•ì¥ì„ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤. (ìš°ì¸¡ í•˜ë‹¨ íŒì—… 'Install' í´ë¦­)
                  </div>
                </div>
              </div>
              <div
                class="bg-stone-100 rounded-xl border border-stone-200 p-4 flex items-center justify-center"
              >
                <div class="text-center space-y-2">
                  <div class="text-4xl">ğŸ”Œ</div>
                  <p class="text-xs text-stone-500 font-mono">
                    Direct Connection via Dev Containers
                  </p>
                  <div
                    class="text-xs bg-white p-2 rounded border border-stone-200 text-stone-600 text-left mt-2"
                  >
                    <strong>ì¥ì :</strong><br />
                    âœ… SSH ì„¤ì • ë¶ˆí•„ìš”<br />
                    âœ… ê°€ì¥ ê°„í¸í•œ ì—°ê²°<br />
                    âœ… ë‚´ ì»´í“¨í„° í™˜ê²½ ë³´í˜¸
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Step 4: Setup & Run DB Test -->
          <div
            class="bg-white rounded-2xl shadow-sm border border-stone-200 overflow-hidden"
          >
            <div class="bg-stone-50 border-b border-stone-200 px-6 py-4">
              <h4 class="font-bold text-stone-800 flex items-center gap-2">
                <span
                  class="bg-orange-500 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs"
                  >Step 4</span
                >
                ê°€ìƒí™˜ê²½ ì„¤ì • ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
              </h4>
            </div>

            <!-- Env Tabs -->
            <div
              class="flex border-b border-stone-200 px-6 pt-4 gap-2 bg-stone-50"
            >
              <button
                onclick="switchEnvTab('conda')"
                id="tab-env-conda"
                class="env-tab-active px-4 py-2 rounded-t-lg text-sm font-medium transition-colors border-b-0 bg-white text-orange-700 border border-stone-200"
              >
                Conda (ì¶”ì²œ)
              </button>
              <button
                onclick="switchEnvTab('venv')"
                id="tab-env-venv"
                class="env-tab-inactive px-4 py-2 rounded-t-lg text-sm font-medium transition-colors text-stone-500 hover:text-stone-700 bg-stone-50"
              >
                venv (ê¸°ë³¸)
              </button>
            </div>

            <div class="p-6 space-y-6">
              <!-- Conda Content (Default) -->
              <div id="content-conda" class="block">
                <p class="text-sm text-stone-600 mb-2">
                  ë°ì´í„° ê³¼í•™ì— ìµœì í™”ëœ Minicondaë¥¼ ì„¤ì¹˜í•˜ê³  í™˜ê²½ì„ êµ¬ì„±í•©ë‹ˆë‹¤.
                </p>
                <div
                  class="bg-stone-900 rounded-lg p-4 text-xs md:text-sm text-stone-300 overflow-x-auto relative group"
                >
                  <button
                    onclick="copyToClipboard(this.nextElementSibling.innerText)"
                    class="absolute top-4 right-4 bg-white/10 hover:bg-white/20 text-white text-xs px-3 py-1 rounded transition-colors opacity-0 group-hover:opacity-100"
                  >
                    Copy
                  </button>
                  <pre><code class="language-bash whitespace-pre-wrap font-mono"># 0. wget ì„¤ì¹˜ (Ubuntu ê¸°ë³¸ ì´ë¯¸ì§€ì—ëŠ” ì—†ìŒ)
apt update && apt install wget -y

# 1. Miniconda ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ë‹¤ìš´ë¡œë“œ
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh

# 2. ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
bash Miniconda3-latest-Linux-x86_64.sh -b -p $HOME/miniconda
source $HOME/miniconda/bin/activate
conda init

# 3. í„°ë¯¸ë„ ì¬ì‹œì‘ íš¨ê³¼ (í™˜ê²½ë³€ìˆ˜ ì ìš©)
source ~/.bashrc

# 4. ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
conda create -n myenv python=3.10 -y
conda activate myenv

# 5. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
conda install -c conda-forge numpy pandas matplotlib seaborn jupyter ipykernel pymysql cryptography sqlalchemy pymongo -y</code></pre>
                </div>
              </div>

              <!-- venv Content -->
              <div id="content-venv" class="hidden">
                <p class="text-sm text-stone-600 mb-2">
                  Ubuntu ê¸°ë³¸ íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°€ë³ê²Œ ê°€ìƒí™˜ê²½ì„ êµ¬ì„±í•©ë‹ˆë‹¤.
                </p>
                <div
                  class="bg-stone-900 rounded-lg p-4 text-xs md:text-sm text-stone-300 overflow-x-auto relative group"
                >
                  <button
                    onclick="copyToClipboard(this.nextElementSibling.innerText)"
                    class="absolute top-4 right-4 bg-white/10 hover:bg-white/20 text-white text-xs px-3 py-1 rounded transition-colors opacity-0 group-hover:opacity-100"
                  >
                    Copy
                  </button>
                  <pre><code class="language-bash whitespace-pre-wrap font-mono"># 1. íŒ¨í‚¤ì§€ ëª©ë¡ ì—…ë°ì´íŠ¸ ë° í•„ìˆ˜ ìœ í‹¸ ì„¤ì¹˜
apt update && apt install software-properties-common -y

# 2. deadsnakes PPA ì¶”ê°€ (Python 3.10 ì €ì¥ì†Œ í™•ë³´)
add-apt-repository ppa:deadsnakes/ppa -y
apt update

# 3. Python 3.10 ë° venv ëª¨ë“ˆ ì„¤ì¹˜
apt install python3.10 python3.10-venv -y

# 4. ê°€ìƒí™˜ê²½ ìƒì„± (myenv)
python3.10 -m venv myenv

# 5. ê°€ìƒí™˜ê²½ í™œì„±í™”
source myenv/bin/activate

# 6. pip ì—…ê·¸ë ˆì´ë“œ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
pip install --upgrade pip
pip install numpy pandas matplotlib seaborn jupyter ipykernel pymysql cryptography pymongo sqlalchemy</code></pre>
                </div>
              </div>

              <div class="border-t border-stone-100 pt-6">
                <h5 class="font-bold text-sm text-stone-700 mb-2">
                  DB ì ‘ì† í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‹¤í–‰
                </h5>
                <p class="text-sm text-stone-600 mb-2">
                  VS Codeì—ì„œ
                  <code class="bg-stone-100 px-1 rounded">test_db.py</code>
                  íŒŒì¼ì„ ë§Œë“¤ê³  ì•„ë˜ ì½”ë“œë¥¼ ë¶™ì—¬ë„£ì–´ ì‹¤í–‰í•˜ì„¸ìš”. <br /><span
                    class="text-orange-600 font-bold"
                    >* ì¤‘ìš”:</span
                  >
                  ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ ìœˆë„ìš° DBë¡œ ì ‘ì† ì‹œ
                  <code>host.docker.internal</code>ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
                </p>
                <div
                  class="bg-stone-900 rounded-lg p-4 text-xs md:text-sm text-stone-300 overflow-x-auto relative group"
                >
                  <button
                    onclick="copyToClipboard(this.nextElementSibling.innerText)"
                    class="absolute top-4 right-4 bg-white/10 hover:bg-white/20 text-white text-xs px-3 py-1 rounded transition-colors opacity-0 group-hover:opacity-100"
                  >
                    Copy
                  </button>
                  <pre><code class="language-python whitespace-pre-wrap font-mono">import pymysql

# Ubuntu ì»¨í…Œì´ë„ˆì—ì„œ ìœˆë„ìš°(Host) DB ì ‘ì† ì‹œ ì£¼ì†Œ
DB_HOST = "host.docker.internal" 
DB_PORT = 3307  # MySQL í¬íŠ¸ (Docker ì„¤ì •ê°’)
DB_PASS = "pass"

print(f"Connecting to {DB_HOST}:{DB_PORT}...")

try:
    conn = pymysql.connect(
        host=DB_HOST, user='root', password=DB_PASS,
        port=DB_PORT, charset='utf8mb4'
    )
    print("âœ… Success! Ubuntu container is connected to Windows DB.")
    conn.close()
except Exception as e:
    print(f"âŒ Error: {e}")</code></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 5. Troubleshooting & Tools -->
      <section id="troubleshooting" class="scroll-mt-24 mb-20">
        <div class="grid md:grid-cols-2 gap-8">
          <!-- GUI Tools -->
          <div>
            <h3
              class="text-xl font-bold text-stone-900 mb-4 flex items-center gap-2"
            >
              <span>ğŸ› </span> ì¶”ì²œ ëª¨ë‹ˆí„°ë§ íˆ´
            </h3>
            <div
              class="bg-white rounded-xl border border-stone-200 p-6 space-y-6"
            >
              <div class="flex gap-4">
                <div
                  class="w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center text-2xl"
                >
                  ğŸ¦«
                </div>
                <div>
                  <h4 class="font-bold text-stone-800">DBeaver (ê°•ë ¥ ì¶”ì²œ)</h4>
                  <p class="text-sm text-stone-600 mt-1">
                    í•˜ë‚˜ì˜ í”„ë¡œê·¸ë¨ìœ¼ë¡œ MySQL, MongoDBë¥¼ ëª¨ë‘ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ”
                    ë¬´ë£Œ í†µí•© íˆ´ì…ë‹ˆë‹¤.
                  </p>
                  <ul
                    class="text-xs text-stone-500 mt-2 space-y-1 bg-stone-50 p-2 rounded"
                  >
                    <li>â€¢ Host: localhost</li>
                    <li>â€¢ Port: 3307 / 27018</li>
                    <li>â€¢ Password: pass</li>
                  </ul>
                </div>
              </div>
              <div class="flex gap-4 border-t border-stone-100 pt-6">
                <div
                  class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center text-2xl"
                >
                  ğŸ†š
                </div>
                <div>
                  <h4 class="font-bold text-stone-800">VS Code Extension</h4>
                  <p class="text-sm text-stone-600 mt-1">
                    ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´ì„œ ë°”ë¡œ DBë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ ê°„í¸í•©ë‹ˆë‹¤.
                  </p>
                  <div class="mt-2 flex gap-2">
                    <span
                      class="px-2 py-1 bg-stone-100 text-xs rounded text-stone-600"
                      >MySQL by Weijan Chen</span
                    >
                    <span
                      class="px-2 py-1 bg-stone-100 text-xs rounded text-stone-600"
                      >MongoDB for VS Code</span
                    >
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- FAQ -->
          <div>
            <h3
              class="text-xl font-bold text-stone-900 mb-4 flex items-center gap-2"
            >
              <span>â“</span> ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ (Troubleshooting)
            </h3>
            <div class="space-y-3">
              <details
                class="group bg-white rounded-xl border border-stone-200 overflow-hidden"
              >
                <summary
                  class="flex items-center justify-between p-4 cursor-pointer bg-stone-50 group-open:bg-orange-50 transition-colors"
                >
                  <span class="font-medium text-stone-800 text-sm"
                    >ì—ëŸ¬: "Bind for 0.0.0.0:3306 failed"</span
                  >
                  <span
                    class="text-stone-400 group-open:rotate-180 transition-transform"
                    >â–¼</span
                  >
                </summary>
                <div
                  class="p-4 text-sm text-stone-600 border-t border-stone-200"
                >
                  <p class="font-bold text-red-500 mb-2">ì›ì¸: í¬íŠ¸ ì¶©ëŒ</p>
                  <p>ì´ë¯¸ ì»´í“¨í„°ì— MySQLì´ ì„¤ì¹˜ë˜ì–´ ì‹¤í–‰ ì¤‘ì¸ ê²½ìš°ì…ë‹ˆë‹¤.</p>
                  <ul class="list-disc pl-5 mt-2 space-y-1">
                    <li>ë°©ë²• 1: ìœˆë„ìš° 'ì„œë¹„ìŠ¤'ì—ì„œ MySQL ì¤‘ì§€</li>
                    <li>
                      ë°©ë²• 2: Docker ëª…ë ¹ì–´ì—ì„œ í¬íŠ¸ ë³€ê²½ (ì˜ˆ: -p 3307:3306)
                    </li>
                  </ul>
                </div>
              </details>

              <details
                class="group bg-white rounded-xl border border-stone-200 overflow-hidden"
              >
                <summary
                  class="flex items-center justify-between p-4 cursor-pointer bg-stone-50 group-open:bg-orange-50 transition-colors"
                >
                  <span class="font-medium text-stone-800 text-sm"
                    >MongoDB í´ë”(C:\data\db)ë¥¼ ë§Œë“¤ì–´ì•¼ í•˜ë‚˜ìš”?</span
                  >
                  <span
                    class="text-stone-400 group-open:rotate-180 transition-transform"
                    >â–¼</span
                  >
                </summary>
                <div
                  class="p-4 text-sm text-stone-600 border-t border-stone-200"
                >
                  <p class="font-bold text-green-600 mb-2">ë‹µë³€: ì•„ë‹ˆìš”!</p>
                  <p>
                    Docker ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì— ìë™ìœ¼ë¡œ ìƒì„±ë˜ë¯€ë¡œ ë‚´ ì»´í“¨í„°ì—
                    í´ë”ë¥¼ ë§Œë“¤ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ì‹¤ìŠµ í™˜ê²½ì„ ê¹”ë”í•˜ê²Œ ìœ ì§€í•  ìˆ˜
                    ìˆìŠµë‹ˆë‹¤.
                  </p>
                </div>
              </details>

              <details
                class="group bg-white rounded-xl border border-stone-200 overflow-hidden"
              >
                <summary
                  class="flex items-center justify-between p-4 cursor-pointer bg-stone-50 group-open:bg-orange-50 transition-colors"
                >
                  <span class="font-medium text-stone-800 text-sm"
                    >ì»¨í…Œì´ë„ˆë¥¼ ê»ë‹¤ ì¼œë‹ˆ ë°ì´í„°ê°€ ì‚¬ë¼ì¡Œì–´ìš”.</span
                  >
                  <span
                    class="text-stone-400 group-open:rotate-180 transition-transform"
                    >â–¼</span
                  >
                </summary>
                <div
                  class="p-4 text-sm text-stone-600 border-t border-stone-200"
                >
                  <p>
                    ê¸°ë³¸ ì‹¤ìŠµ ëª…ë ¹ì–´ëŠ” Volume(ì €ì¥ì†Œ)ì„ ì—°ê²°í•˜ì§€ ì•Šì•„ ì»¨í…Œì´ë„ˆ
                    ì‚­ì œ ì‹œ ë°ì´í„°ë„ ì‚¬ë¼ì§‘ë‹ˆë‹¤.
                  </p>
                  <p class="mt-2">
                    ë°ì´í„°ë¥¼ ìœ ì§€í•˜ë ¤ë©´
                    <code class="bg-stone-100 px-1 rounded"
                      >-v my_data:/var/lib/mysql</code
                    >
                    ì˜µì…˜ì„ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.
                  </p>
                </div>
              </details>

              <details
                class="group bg-white rounded-xl border border-stone-200 overflow-hidden"
              >
                <summary
                  class="flex items-center justify-between p-4 cursor-pointer bg-stone-50 group-open:bg-orange-50 transition-colors"
                >
                  <span class="font-medium text-stone-800 text-sm"
                    >RuntimeError: 'cryptography' package is required</span
                  >
                  <span
                    class="text-stone-400 group-open:rotate-180 transition-transform"
                    >â–¼</span
                  >
                </summary>
                <div
                  class="p-4 text-sm text-stone-600 border-t border-stone-200"
                >
                  <p class="font-bold text-red-500 mb-2">
                    ì›ì¸: MySQL 8.0 ì¸ì¦ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëˆ„ë½
                  </p>
                  <p>
                    MySQL 8.0 ì´ìƒì€ ë³´ì•ˆì´ ê°•í™”ëœ ì¸ì¦ ë°©ì‹ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ì¶”ê°€
                    íŒ¨í‚¤ì§€ê°€ í•„ìš”í•©ë‹ˆë‹¤.
                  </p>
                  <p class="mt-2">
                    <code class="bg-stone-100 px-1 rounded"
                      >pip install cryptography</code
                    >
                    ë˜ëŠ”
                    <code class="bg-stone-100 px-1 rounded"
                      >conda install cryptography</code
                    >ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.
                  </p>
                </div>
              </details>

              <!-- Updated FAQ item for Error 1046 -->
              <details
                class="group bg-white rounded-xl border border-stone-200 overflow-hidden"
              >
                <summary
                  class="flex items-center justify-between p-4 cursor-pointer bg-stone-50 group-open:bg-orange-50 transition-colors"
                >
                  <span class="font-medium text-stone-800 text-sm"
                    >OperationalError: (1046, 'No database selected')</span
                  >
                  <span
                    class="text-stone-400 group-open:rotate-180 transition-transform"
                    >â–¼</span
                  >
                </summary>
                <div
                  class="p-4 text-sm text-stone-600 border-t border-stone-200"
                >
                  <p class="font-bold text-red-500 mb-2">ì›ì¸: DB ë¯¸ì„ íƒ</p>
                  <p>
                    ì ‘ì† í›„ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì„ íƒí•˜ì§€ ì•Šê³  í…Œì´ë¸”ì„ ìƒì„±í•˜ë ¤ í•  ë•Œ
                    ë°œìƒí•©ë‹ˆë‹¤.
                  </p>
                  <p class="mt-2 text-stone-700">
                    <strong>í•´ê²°ì±…:</strong> ì½”ë“œì—ì„œ í…Œì´ë¸” ìƒì„± ì „ì— ì•„ë˜ ë‘
                    ì¤„ì„ ë°˜ë“œì‹œ ì¶”ê°€í•˜ì„¸ìš”.
                  </p>
                  <pre
                    class="bg-stone-100 p-2 rounded mt-1 font-mono text-xs overflow-x-auto"
                  >
cursor.execute("CREATE DATABASE IF NOT EXISTS lecture_db")
cursor.execute("USE lecture_db")</pre
                  >
                </div>
              </details>

              <!-- Updated FAQ item for Error 1045 -->
              <details
                class="group bg-white rounded-xl border border-stone-200 overflow-hidden"
              >
                <summary
                  class="flex items-center justify-between p-4 cursor-pointer bg-stone-50 group-open:bg-orange-50 transition-colors"
                >
                  <span class="font-medium text-stone-800 text-sm"
                    >OperationalError: (1045, "Access denied...")</span
                  >
                  <span
                    class="text-stone-400 group-open:rotate-180 transition-transform"
                    >â–¼</span
                  >
                </summary>
                <div
                  class="p-4 text-sm text-stone-600 border-t border-stone-200"
                >
                  <p class="font-bold text-red-500 mb-2">
                    ì›ì¸ 1: ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜
                  </p>
                  <p>
                    íŒŒì´ì¬ ì½”ë“œì˜ <code>password</code>ì™€ Docker ì‹¤í–‰ ì‹œ ì„¤ì •í•œ
                    ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.
                  </p>
                  <br />
                  <p class="font-bold text-red-500 mb-2">
                    ì›ì¸ 2: ìœˆë„ìš° ë¡œì»¬ MySQL ì ‘ì† (ê°€ì¥ í”í•¨)
                  </p>
                  <p>
                    Docker ì»¨í…Œì´ë„ˆê°€ ì•„ë‹ˆë¼, ì»´í“¨í„°ì— ì´ë¯¸ ì„¤ì¹˜ëœ MySQLë¡œ
                    ì ‘ì†ëœ ê²½ìš°ì…ë‹ˆë‹¤.
                  </p>
                  <p class="mt-1">
                    Docker í¬íŠ¸ë¥¼ ë³€ê²½í•˜ì—¬ ì‹¤í–‰í•˜ì„¸ìš” (ì˜ˆ:
                    <code>-p 3307:3306</code>) ê·¸ë¦¬ê³  ì½”ë“œ í¬íŠ¸ë„
                    <code>3307</code>ë¡œ ìˆ˜ì •í•˜ì„¸ìš”.
                  </p>
                </div>
              </details>

              <!-- Added FAQ item for Python Env Not Found -->
              <details
                class="group bg-white rounded-xl border border-stone-200 overflow-hidden"
              >
                <summary
                  class="flex items-center justify-between p-4 cursor-pointer bg-stone-50 group-open:bg-orange-50 transition-colors"
                >
                  <span class="font-medium text-stone-800 text-sm"
                    >Conda ê°€ìƒí™˜ê²½ì´ VS Codeì—ì„œ ì•ˆ ë³´ì—¬ìš”!</span
                  >
                  <span
                    class="text-stone-400 group-open:rotate-180 transition-transform"
                    >â–¼</span
                  >
                </summary>
                <div
                  class="p-4 text-sm text-stone-600 border-t border-stone-200"
                >
                  <p class="font-bold text-red-500 mb-2">
                    ì›ì¸: ì»¨í…Œì´ë„ˆ ë‚´ í™•ì¥ ë¯¸ì„¤ì¹˜
                  </p>
                  <p>
                    VS Codeê°€ ì»¨í…Œì´ë„ˆì— ì ‘ì†í–ˆì§€ë§Œ,
                    <strong>Python í™•ì¥ í”„ë¡œê·¸ë¨</strong>ì´ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—
                    ì„¤ì¹˜ë˜ì§€ ì•Šì•„ í™˜ê²½ì„ ëª» ì°¾ëŠ” ê²ƒì…ë‹ˆë‹¤.
                  </p>
                  <ul class="list-disc pl-5 mt-2 space-y-1">
                    <li>
                      í•´ê²° 1: í™”ë©´ ìš°ì¸¡ í•˜ë‹¨ "Install 'Python' extension?"
                      íŒì—…ì˜ <strong>Install</strong> ë²„íŠ¼ í´ë¦­
                    </li>
                    <li>
                      í•´ê²° 2: ì™¼ìª½ í™•ì¥(Extensions) íƒ­ì—ì„œ Python ê²€ìƒ‰ í›„
                      <strong>Install in Container</strong> í´ë¦­
                    </li>
                    <li>
                      í•´ê²° 3: ì„¤ì¹˜ í›„ <code>F1</code> >
                      <code>Developer: Reload Window</code> ì‹¤í–‰
                    </li>
                  </ul>
                </div>
              </details>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="bg-stone-900 text-stone-400 py-8 text-center text-sm">
      <p>&copy; 2024 Interactive Data Lab. Based on Lecture Guide Material.</p>
    </footer>

    <script>
      // --- State & Data ---

      // Function to generate dynamic code snippets based on user input
      function getCodeSnippets() {
        const password =
          document.getElementById("passwordInput").value || "pass";

        const mysqlPort = 3307;
        const mongoPort = 27018;

        return {
          mysql: `import pymysql

# ==========================================
# [ì„¤ì •] ì ‘ì† ì •ë³´
# ==========================================
# 1. ìœˆë„ìš°(Local) ì‹¤í–‰ ì‹œ: (ê¸°ë³¸ê°’)
DB_HOST = "127.0.0.1" 

# 2. Docker(Ubuntu) ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì‹¤í–‰ ì‹œ: (ì£¼ì„ í•´ì œ í›„ ì‚¬ìš©)
# DB_HOST = "host.docker.internal" 

# Docker ì‹¤í–‰ ì‹œ ì„¤ì •í•œ í¬íŠ¸ (-p ${mysqlPort}:3306)
DB_PORT = ${mysqlPort}
DB_PASS = "${password}"

# ------------------------------------------

# 1. ì—°ê²° ì„¤ì •
conn = pymysql.connect(
    host=DB_HOST, 
    user='root', 
    password=DB_PASS,
    port=DB_PORT, 
    charset='utf8mb4',
    cursorclass=pymysql.cursors.DictCursor
)

# 2. ì»¤ì„œ ìƒì„±
with conn.cursor() as cursor:
    print(f"âœ… Connected to MySQL at {DB_HOST}:{DB_PORT}")
    
    # 3. DB ìƒì„± ë° ì„ íƒ (Error 1046 ë°©ì§€)
    cursor.execute("CREATE DATABASE IF NOT EXISTS lecture_db")
    cursor.execute("USE lecture_db")

    # 4. í…Œì´ë¸” ìƒì„± ì¿¼ë¦¬ ì‹¤í–‰
    # IF NOT EXISTS: í…Œì´ë¸”ì´ ì—†ì„ ë•Œë§Œ ìƒì„±í•˜ì—¬ ì—ëŸ¬ ë°©ì§€
    cursor.execute("""
        CREATE TABLE IF NOT EXISTS users (
            id INT AUTO_INCREMENT PRIMARY KEY,
            name VARCHAR(50),
            score INT
        )
    """)
    
    # 5. ë°ì´í„° ì‚½ì… ì¿¼ë¦¬ ì‹¤í–‰
    cursor.execute("INSERT INTO users (name, score) VALUES ('Alice', 85)")
    cursor.execute("INSERT INTO users (name, score) VALUES ('Bob', 92)")
    
    # ì»¤ë°‹(Commit): ë³€ê²½ì‚¬í•­ì„ DBì— ì˜êµ¬ ì €ì¥ (í•„ìˆ˜!)
    conn.commit()
    
    # 6. ì¡°íšŒ ì¿¼ë¦¬ ì‹¤í–‰ ë° ê²°ê³¼ ì¶œë ¥
    cursor.execute("SELECT * FROM users")
    print(cursor.fetchall()) # ëª¨ë“  ê²°ê³¼ í–‰ ê°€ì ¸ì˜¤ê¸°

# ë¦¬ì†ŒìŠ¤ ë°˜í™˜ì„ ìœ„í•´ ì—°ê²° ì¢…ë£Œ
conn.close()`,

          mongo: `import pymongo

# ==========================================
# [ì„¤ì •] ì ‘ì† ì •ë³´
# ==========================================
# 1. ìœˆë„ìš°(Local) ì‹¤í–‰ ì‹œ: (ê¸°ë³¸ê°’)
DB_HOST = "127.0.0.1"

# 2. Docker(Ubuntu) ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì‹¤í–‰ ì‹œ: (ì£¼ì„ í•´ì œ í›„ ì‚¬ìš©)
# DB_HOST = "host.docker.internal"

# Docker ì‹¤í–‰ ì‹œ ì„¤ì •í•œ í¬íŠ¸ (-p ${mongoPort}:27017)
DB_PORT = ${mongoPort} 
DB_PASS = "${password}"

# ------------------------------------------

# 1. ì—°ê²° URL ìƒì„±
mongo_url = f"mongodb://root:{DB_PASS}@{DB_HOST}:{DB_PORT}/"

# 2. ì—°ê²°
client = pymongo.MongoClient(mongo_url)

# ì—°ê²° í…ŒìŠ¤íŠ¸
client.admin.command('ping')
print(f"âœ… Connected to MongoDB at {DB_HOST}:{DB_PORT}")

# 3. DB ë° ì»¬ë ‰ì…˜ ì„ íƒ
db = client["lecture_db"]
col = db["logs"]

# 4. ë°ì´í„° ì‚½ì…
log_data = {
    "level": "INFO", 
    "msg": "Server started", 
    "tags": ["aws", "linux"]
}
res = col.insert_one(log_data)
print(f"Saved ID: {res.inserted_id}")

# 5. ì¡°íšŒ
print(list(col.find({}, {"_id": 0})))`,

          pandas: `import pandas as pd
from sqlalchemy import create_engine

# ==========================================
# [ì„¤ì •] ì ‘ì† ì •ë³´
# ==========================================
# ìœˆë„ìš°(Local) ì‹¤í–‰ ì‹œ 127.0.0.1 ì‚¬ìš© ê¶Œì¥
DB_HOST = "127.0.0.1"

# 2. Docker(Ubuntu) ì»¨í…Œì´ë„ˆ ë‚´ë¶€ ì‹¤í–‰ ì‹œ: (ì£¼ì„ í•´ì œ í›„ ì‚¬ìš©)
# DB_HOST = "host.docker.internal"

# MySQL í¬íŠ¸ (Docker ì„¤ì •ê°’)
DB_PORT = ${mysqlPort} 
DB_PASS = "${password}"

# ------------------------------------------

# 1. SQLAlchemy ì—”ì§„ ìƒì„±
db_url = f"mysql+pymysql://root:{DB_PASS}@{DB_HOST}:{DB_PORT}/lecture_db"
engine = create_engine(db_url)

# ì—°ê²° í…ŒìŠ¤íŠ¸
with engine.connect() as connection:
    print(f"âœ… SQLAlchemy Engine Connected to {DB_HOST}:{DB_PORT}")

# 2. ë°ì´í„°í”„ë ˆì„ ìƒì„±
df = pd.DataFrame({
    'date': ['2024-01-01', '2024-01-02', '2024-01-03'],
    'sales': [1000, 1500, 2000],
    'platform': ['Mobile', 'PC', 'Mobile']
})

# 3. DBì— ì €ì¥
df.to_sql(name='daily_sales', con=engine, if_exists='replace', index=False)
print("DataFrame saved to DB!")

# 4. SQL ê²°ê³¼ -> DataFrame ë³€í™˜
result_df = pd.read_sql("SELECT * FROM daily_sales", con=engine)
print(result_df)`,
        };
      }

      var simulationLogs = {
        mysql: `[System] Connecting to MySQL at localhost:3307...
[Success] Connected!
[Query] CREATE DATABASE lecture_db... OK
[Query] USE lecture_db... OK
[Query] CREATE TABLE users... OK
[Query] INSERT INTO users... OK (2 rows affected)
[Result] [{'id': 1, 'name': 'Alice', 'score': 85}, {'id': 2, 'name': 'Bob', 'score': 92}]
[System] Connection closed.`,
        mongo: `[System] Connecting to MongoDB at localhost:27018...
[Success] Connected!
[Operation] Insert One Document... OK
[Result] Saved ID: 664b1...
[Query] Find All...
[Result] [{'level': 'INFO', 'msg': 'Server started', 'tags': ['aws', 'linux']}]`,
        pandas: `[System] Engine created for MySQL (Port 3307).
[Pandas] Dataframe created (3 rows).
[SQLAlchemy] Executing to_sql()...
[Success] DataFrame saved to DB table 'daily_sales'.
[Pandas] read_sql("SELECT * FROM daily_sales")...
         date  sales platform
0  2024-01-01   1000   Mobile
1  2024-01-02   1500       PC
2  2024-01-03   2000   Mobile`,
      };

      var envInstructions = {
        venv: `# 1. íŒ¨í‚¤ì§€ ëª©ë¡ ì—…ë°ì´íŠ¸ (ìµœì‹  ë²„ì „ ì •ë³´ ê°€ì ¸ì˜¤ê¸°)
sudo apt update

# 2. Python 3.10 ë° venv ëª¨ë“ˆ, pip ì„¤ì¹˜
sudo apt install python3.10 python3.10-venv python3-pip -y

# 3. ê°€ìƒí™˜ê²½ ìƒì„± (myenvë¼ëŠ” ì´ë¦„ì˜ ê²©ë¦¬ëœ ê³µê°„ ìƒì„±)
python3.10 -m venv myenv

# 4. ê°€ìƒí™˜ê²½ í™œì„±í™” (í™œì„±í™”ë˜ë©´ í„°ë¯¸ë„ ì•ì— (myenv)ê°€ ë¶™ìŒ)
source myenv/bin/activate

# 5. ë°ì´í„° ë¶„ì„ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ (cryptography ì¶”ê°€ë¨)
pip install numpy pandas matplotlib seaborn jupyter ipykernel pymysql cryptography pymongo sqlalchemy`,

        conda: `# 0. wget ì„¤ì¹˜ (Ubuntu ê¸°ë³¸ ì´ë¯¸ì§€ì—ëŠ” ì—†ìŒ)
apt update && apt install wget -y

# 1. Miniconda ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ë‹¤ìš´ë¡œë“œ
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh

# 2. ì„¤ì¹˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
bash Miniconda3-latest-Linux-x86_64.sh
# (ì„¤ì¹˜ ì¤‘ 'yes' ì…ë ¥ ë° ì—”í„° í•„ìš”)

# 3. í™˜ê²½ ë³€ìˆ˜ ì ìš© (í„°ë¯¸ë„ ì¬ì‹œì‘ íš¨ê³¼)
source ~/.bashrc

# 4. Python 3.10 ê°€ìƒí™˜ê²½ ìƒì„± (ì´ë¦„: myenv)
conda create -n myenv python=3.10 -y

# 5. ê°€ìƒí™˜ê²½ í™œì„±í™”
conda activate myenv

# 6. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ (conda-forge ì±„ë„ ê¶Œì¥, cryptography ì¶”ê°€ë¨)
conda install -c conda-forge numpy pandas matplotlib seaborn jupyter ipykernel pymysql cryptography sqlalchemy pymongo`,
      };

      var localInstallCmds = {
        pip: {
          cmd: "pip install pymysql cryptography sqlalchemy pandas pymongo",
          note: "* ì¼ë°˜ Python ì‚¬ìš©ìëŠ” CMD/PowerShellì—ì„œ ì‹¤í–‰í•˜ì„¸ìš”. (cryptography íŒ¨í‚¤ì§€ í¬í•¨ë¨)",
        },
        conda: {
          cmd: "conda install -c conda-forge pymysql cryptography sqlalchemy pandas pymongo",
          note: "* Anaconda Promptë¥¼ ì‹¤í–‰í•˜ê±°ë‚˜ conda í™˜ê²½ì„ í™œì„±í™”(activate)í•œ í›„ ì…ë ¥í•˜ì„¸ìš”. (cryptography íŒ¨í‚¤ì§€ í¬í•¨ë¨)",
        },
      };

      var currentTab = "mysql";
      var currentEnv = "conda"; // Track current environment tab for copy function, defaulting to conda
      var myChart = null;

      // --- Functions ---

      // 1. Architecture Interaction
      window.highlightConnection = function (type) {
        const line = document.getElementById("conn-line");
        const targets = {
          mysql: document.getElementById("target-mysql"),
          mongo: document.getElementById("target-mongo"),
        };

        // Reset all
        Object.values(targets).forEach((el) => {
          el.classList.remove(
            "opacity-100",
            "border-orange-500",
            "border-blue-500",
            "border-green-500"
          );
          el.classList.add("opacity-60", "border-stone-600");
        });

        // Highlight specific
        if (type === "mysql") {
          line.className =
            "w-16 h-1 bg-orange-500 rounded transition-all duration-300 transform translate-y-[0px]"; // Adjusted for visual layout approximation
          targets.mysql.classList.remove("opacity-60", "border-stone-600");
          targets.mysql.classList.add("opacity-100", "border-orange-500");
        } else if (type === "mongo") {
          line.className =
            "w-16 h-1 bg-green-500 rounded transition-all duration-300";
          targets.mongo.classList.remove("opacity-60", "border-stone-600");
          targets.mongo.classList.add("opacity-100", "border-green-500");
        }
      };

      window.resetConnection = function () {
        const line = document.getElementById("conn-line");
        line.className =
          "w-16 h-1 bg-stone-300 rounded transition-all duration-300";
        ["target-mysql", "target-mongo"].forEach((id) => {
          const el = document.getElementById(id);
          el.classList.remove(
            "opacity-100",
            "border-orange-500",
            "border-blue-500",
            "border-green-500"
          );
          el.classList.add("opacity-60", "border-stone-600");
        });
      };

      window.onDbChange = function () {
        const dbType = document.getElementById("dbSelector").value;
        const portInput = document.getElementById("portInput");

        if (dbType === "mysql") {
          portInput.value = 3307;
        } else if (dbType === "mongo") {
          portInput.value = 27018;
        }

        updateCommand();
      };

      // 2. Command Builder & Code Update
      window.updateCommand = function () {
        const dbType = document.getElementById("dbSelector").value;
        const password =
          document.getElementById("passwordInput").value || "pass";
        const port = document.getElementById("portInput").value;
        const useVolume = document.getElementById("volumeCheck").checked;

        let cmd = "docker run ";
        let desc = "";
        let defaultPort = "";

        if (dbType === "mysql") {
          defaultPort = "3306";
          cmd += `--name mysql-lecture -e MYSQL_ROOT_PASSWORD=${password} -d -p ${port}:${defaultPort}`;
          if (useVolume) cmd += ` -v mysql_data:/var/lib/mysql`;
          cmd += ` mysql:latest`;
          desc = `<span class="text-orange-400 font-bold">MySQL</span> ì»¨í…Œì´ë„ˆ ì‹¤í–‰. (Port ${port} -> ${defaultPort})`;
        } else {
          defaultPort = "27017";
          cmd += `--name mongo-lecture -e MONGO_INITDB_ROOT_USERNAME=root -e MONGO_INITDB_ROOT_PASSWORD=${password} -d -p ${port}:${defaultPort}`;
          if (useVolume) cmd += ` -v mongo_data:/data/db`;
          cmd += ` mongo:latest`;
          desc = `<span class="text-green-400 font-bold">MongoDB</span> ì»¨í…Œì´ë„ˆ ì‹¤í–‰. (Port ${port} -> ${defaultPort})`;
        }

        document.getElementById("commandOutput").innerText = cmd;
        document.getElementById("commandDesc").innerHTML = desc;

        // Also refresh the code snippet if user changes input while looking at code
        // Only refresh if codeDisplay is visible/populated to avoid performance issues
        // But highlight.js needs element. We can just re-call switchTab(currentTab)
        // But switchTab resets simulation log. It's okay.
        // Better: update content directly.
        const snippets = getCodeSnippets();
        const codeEl = document.getElementById("codeDisplay");
        if (codeEl) {
          codeEl.textContent = snippets[currentTab];
          hljs.highlightElement(codeEl);
        }
      };

      window.copyCommand = function () {
        const text = document.getElementById("commandOutput").innerText;
        copyToClipboard(text);
      };

      // 3. Code Lab Interaction
      window.switchTab = function (tab) {
        currentTab = tab;
        // Update Tab UI
        ["mysql", "mongo", "pandas"].forEach((t) => {
          const btn = document.getElementById(`tab-${t}`);
          if (t === tab) {
            btn.className =
              "active-tab px-6 py-4 text-sm font-medium transition-colors whitespace-nowrap";
          } else {
            btn.className =
              "inactive-tab px-6 py-4 text-sm font-medium transition-colors whitespace-nowrap";
          }
        });

        // Update Content using dynamic generator
        const snippets = getCodeSnippets();
        const codeEl = document.getElementById("codeDisplay");
        codeEl.classList.remove("fade-in");

        codeEl.textContent = snippets[tab];
        hljs.highlightElement(codeEl);

        codeEl.classList.add("fade-in");

        // Reset Simulation Area
        document.getElementById("consoleOutput").classList.add("hidden");
        document.getElementById("consoleOutput").innerText = "";
        document.getElementById("chartArea").classList.add("hidden");
        document.getElementById("infoBox").classList.remove("hidden");

        if (myChart) {
          myChart.destroy();
          myChart = null;
        }
      };

      // 4. Env Setup Switcher
      window.switchEnvTab = function (env) {
        currentEnv = env;
        const tabVenv = document.getElementById("tab-env-venv");
        const tabConda = document.getElementById("tab-env-conda");
        const contentVenv = document.getElementById("content-venv");
        const contentConda = document.getElementById("content-conda");

        // Safety check
        if (!tabVenv || !tabConda || !contentVenv || !contentConda) {
          console.error("Elements not found for switchEnvTab");
          return;
        }

        if (env === "venv") {
          tabVenv.className =
            "env-tab-active px-4 py-2 rounded-t-lg text-sm font-medium transition-colors border-b-0 bg-white text-orange-700 border border-stone-200";
          tabConda.className =
            "env-tab-inactive px-4 py-2 rounded-t-lg text-sm font-medium transition-colors text-stone-500 hover:text-stone-700 bg-stone-50";

          contentVenv.classList.remove("hidden");
          contentConda.classList.add("hidden");
        } else {
          tabVenv.className =
            "env-tab-inactive px-4 py-2 rounded-t-lg text-sm font-medium transition-colors text-stone-500 hover:text-stone-700 bg-stone-50";
          tabConda.className =
            "env-tab-active px-4 py-2 rounded-t-lg text-sm font-medium transition-colors border-b-0 bg-white text-orange-700 border border-stone-200";

          contentVenv.classList.add("hidden");
          contentConda.classList.remove("hidden");
        }
      };

      window.copyCurrentEnvCommands = function () {
        const contentId =
          currentEnv === "venv" ? "content-venv" : "content-conda";
        const contentEl = document.getElementById(contentId);
        if (!contentEl) return;
        const codeEl = contentEl.querySelector("code");
        if (codeEl) copyToClipboard(codeEl.innerText);
      };

      // New function for Local Install Toggle
      window.switchLocalEnv = function (type) {
        const btnPip = document.getElementById("local-btn-pip");
        const btnConda = document.getElementById("local-btn-conda");
        const cmdDisplay = document.getElementById("localCmd");
        const noteDisplay = document.getElementById("localNote");

        if (type === "pip") {
          btnPip.className =
            "local-btn-active px-3 py-1 text-xs font-bold rounded-md transition-all";
          btnConda.className =
            "local-btn-inactive px-3 py-1 text-xs font-bold rounded-md hover:text-stone-800 transition-all";
          cmdDisplay.innerText = localInstallCmds.pip.cmd;
          noteDisplay.innerText = localInstallCmds.pip.note;
        } else {
          btnPip.className =
            "local-btn-inactive px-3 py-1 text-xs font-bold rounded-md hover:text-stone-800 transition-all";
          btnConda.className =
            "local-btn-active px-3 py-1 text-xs font-bold rounded-md transition-all";
          cmdDisplay.innerText = localInstallCmds.conda.cmd;
          noteDisplay.innerText = localInstallCmds.conda.note;
        }
      };

      window.runSimulation = function () {
        const consoleEl = document.getElementById("consoleOutput");
        const chartArea = document.getElementById("chartArea");
        const infoBox = document.getElementById("infoBox");

        infoBox.classList.add("hidden");
        consoleEl.classList.remove("hidden");
        consoleEl.innerHTML = "";

        // Typewriter effect for logs
        const logs = simulationLogs[currentTab].split("\n");
        let delay = 0;

        logs.forEach((log, index) => {
          setTimeout(() => {
            const div = document.createElement("div");
            div.innerText = log;
            if (log.includes("[Error]")) div.className = "text-red-400";
            else if (log.includes("[Success]"))
              div.className = "text-green-300 font-bold";
            else if (log.includes("[Result]"))
              div.className = "text-yellow-300";
            else div.className = "text-stone-300";

            consoleEl.appendChild(div);
            consoleEl.scrollTop = consoleEl.scrollHeight;
          }, delay);
          delay += 300; // 300ms per line
        });

        // If Pandas, show Chart after logs
        if (currentTab === "pandas") {
          setTimeout(() => {
            chartArea.classList.remove("hidden");
            renderChart();
          }, delay + 500);
        }
      };

      function renderChart() {
        const ctx = document.getElementById("analysisChart").getContext("2d");

        // Data from the Pandas example in the guide
        // df = pd.DataFrame({'date': ['2024-01-01', '2024-01-02', '2024-01-03'], 'sales': [1000, 1500, 2000], 'platform': ['Mobile', 'PC', 'Mobile']})

        myChart = new Chart(ctx, {
          type: "bar",
          data: {
            labels: ["2024-01-01", "2024-01-02", "2024-01-03"],
            datasets: [
              {
                label: "Daily Sales (Pandas Result)",
                data: [1000, 1500, 2000],
                backgroundColor: [
                  "rgba(234, 88, 12, 0.7)", // Orange
                  "rgba(59, 130, 246, 0.7)", // Blue
                  "rgba(234, 88, 12, 0.7)", // Orange
                ],
                borderColor: [
                  "rgba(234, 88, 12, 1)",
                  "rgba(59, 130, 246, 1)",
                  "rgba(234, 88, 12, 1)",
                ],
                borderWidth: 1,
              },
            ],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            animation: {
              duration: 1000,
              easing: "easeOutQuart",
            },
            plugins: {
              legend: {
                display: true,
                position: "top",
              },
              tooltip: {
                callbacks: {
                  label: function (context) {
                    let label = context.dataset.label || "";
                    if (label) {
                      label += ": ";
                    }
                    if (context.parsed.y !== null) {
                      label += new Intl.NumberFormat("en-US", {
                        style: "currency",
                        currency: "KRW",
                      }).format(context.parsed.y * 10); // Simulated currency format
                    }
                    return label;
                  },
                  afterLabel: function (context) {
                    // Custom tooltip to show platform from data
                    const platforms = ["Mobile", "PC", "Mobile"];
                    return `Platform: ${platforms[context.dataIndex]}`;
                  },
                },
              },
            },
            scales: {
              y: {
                beginAtZero: true,
              },
            },
          },
        });
      }

      // --- Robust Copy Function ---
      function copyToClipboard(text) {
        // Create a temporary textarea element
        const textArea = document.createElement("textarea");
        textArea.value = text;

        // Ensure it's not visible but part of the DOM
        textArea.style.position = "fixed";
        textArea.style.left = "-9999px";
        textArea.style.top = "0";
        document.body.appendChild(textArea);

        // Select the text
        textArea.focus();
        textArea.select();

        try {
          // Execute the copy command
          const successful = document.execCommand("copy");
          const msg = successful ? "ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!" : "ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.";
          alert(msg);
        } catch (err) {
          console.error("Fallback: Oops, unable to copy", err);
          alert("ë³µì‚¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        }

        // Clean up
        document.body.removeChild(textArea);
      }

      window.scrollToSection = function (id) {
        document.getElementById(id).scrollIntoView({ behavior: "smooth" });
      };

      // Initialize
      document.addEventListener("DOMContentLoaded", () => {
        switchTab("mysql");
        switchEnvTab("conda"); // Initialize env tab to Conda
        updateCommand();
        hljs.highlightAll(); // Ensure static code blocks are highlighted
      });
    </script>
  </body>
</html>
